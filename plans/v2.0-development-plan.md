# Housefire Arena v2.0 GeliÅŸtirme PlanÄ±

Bu belge, Housefire Arena oyununun 2.0 sÃ¼rÃ¼mÃ¼ iÃ§in geliÅŸtirme gÃ¶revlerini ve teknik detaylarÄ± iÃ§ermektedir.

---

## ğŸ“‹ Ã–zet

| # | GÃ¶rev | Ã–ncelik | Dosyalar |
|---|-------|---------|----------|
| 1 | Crosshair kaldÄ±r + Mouse takipli dÃ¶nÃ¼ÅŸ + Fener | YÃ¼ksek | `input.js`, `player.js`, `main.js`, `ui.js`, `style.css` |
| 2 | WASD tuÅŸlarÄ± dÃ¼zeltme | YÃ¼ksek | `input.js` |
| 3 | Mermi izi uzatma | Orta | `effects.js`, `weapons.js` |
| 4 | Roblox tarzÄ± karakter modeli | Orta | `player.js`, `bot.js` |
| 5 | Ana sayfa tasarÄ±mÄ± | Orta | `index.html`, `style.css` |
| 6 | Bot parÃ§alanma efekti | DÃ¼ÅŸÃ¼k | `bot.js`, `effects.js` |
| 7 | Silah sesleri | Orta | `audio.js` |

---

## 1. ğŸ¯ Crosshair KaldÄ±rma ve Mouse Takipli DÃ¶nÃ¼ÅŸ Sistemi

### Mevcut Durum
- Crosshair ekranÄ±n ortasÄ±nda sabit duruyor
- Pointer Lock API kullanÄ±lÄ±yor (fare kilitleniyor)
- Karakter dÃ¶nÃ¼ÅŸÃ¼ `mouseDelta.x` ile yapÄ±lÄ±yor

### Hedef
- Crosshair tamamen kaldÄ±rÄ±lacak
- Fare pozisyonu takip edilecek (Pointer Lock olmadan)
- Karakter farenin olduÄŸu yÃ¶ne dÃ¶necek
- Fener de o yÃ¶ne bakacak

### Teknik DeÄŸiÅŸiklikler

#### 1.1 [`input.js`](public/js/input.js) DeÄŸiÅŸiklikleri
```javascript
// Yeni metod eklenecek:
getWorldMousePosition(camera, playerPosition) {
    // Fare ekran pozisyonunu world koordinatlarÄ±na Ã§evir
    // Raycasting kullanarak zemin dÃ¼zleminde nokta bul
}
```

#### 1.2 [`player.js`](public/js/player.js) DeÄŸiÅŸiklikleri
```javascript
// rotate() metodu deÄŸiÅŸecek:
rotateTowards(targetWorldPosition) {
    // Hedef noktaya bakacak ÅŸekilde rotation hesapla
    const angle = Math.atan2(
        this.position.x - targetWorldPosition.x,
        this.position.z - targetWorldPosition.z
    );
    this.rotation = angle;
}
```

#### 1.3 [`main.js`](public/js/main.js) DeÄŸiÅŸiklikleri
- `handleMouseMove()` fonksiyonu gÃ¼ncellenecek
- Pointer Lock yerine sÃ¼rekli fare takibi yapÄ±lacak

#### 1.4 [`ui.js`](public/js/ui.js) ve [`style.css`](public/css/style.css)
- Crosshair elementi gizlenecek/kaldÄ±rÄ±lacak

---

## 2. âŒ¨ï¸ WASD TuÅŸlarÄ± DÃ¼zeltme

### Mevcut Sorun
- `getMovementVector()` fonksiyonunda yÃ¶n hesaplamasÄ± hatalÄ± olabilir
- TuÅŸ bazen tepki vermiyor

### Analiz
Mevcut kodda `input.js` satÄ±r 147-176:
```javascript
getMovementVector(rotation) {
    // W: ileri, S: geri, A: sol, D: saÄŸ
    // DÃ¶nÃ¼ÅŸ aÃ§Ä±sÄ±na gÃ¶re hareket yÃ¶nÃ¼ hesaplanÄ±yor
}
```

### Ã‡Ã¶zÃ¼m
- Hareket yÃ¶nÃ¼ kamera aÃ§Ä±sÄ±ndan baÄŸÄ±msÄ±z olmalÄ± (izometrik gÃ¶rÃ¼nÃ¼m iÃ§in)
- TuÅŸ durumlarÄ± daha gÃ¼venilir takip edilmeli

#### 2.1 [`input.js`](public/js/input.js) DeÄŸiÅŸiklikleri
```javascript
// Yeni: Kameradan baÄŸÄ±msÄ±z hareket (izometrik iÃ§in)
getMovementVector() {
    let dx = 0, dz = 0;
    
    // Ekran koordinatlarÄ±nda hareket
    if (this.isKeyDown('w')) dz -= 1; // Kuzey
    if (this.isKeyDown('s')) dz += 1; // GÃ¼ney
    if (this.isKeyDown('a')) dx -= 1; // BatÄ±
    if (this.isKeyDown('d')) dx += 1; // DoÄŸu
    
    // Normalize et
    const len = Math.sqrt(dx * dx + dz * dz);
    if (len > 0) {
        dx /= len;
        dz /= len;
    }
    
    return { x: dx, z: dz, moving: len > 0 };
}
```

---

## 3. ğŸ”« Mermi Ä°zi Uzatma

### Mevcut Durum
[`effects.js`](public/js/effects.js) satÄ±r 187-212:
```javascript
createBulletTrail(start, end, color) {
    // Mermi izi Ã¶mrÃ¼: 10 frame
    this.trails.push({
        mesh: trail,
        life: 10,  // â† Bu deÄŸer artÄ±rÄ±lacak
        maxLife: 10
    });
}
```

### Ã‡Ã¶zÃ¼m
- `life` ve `maxLife` deÄŸerleri artÄ±rÄ±lacak (Ã¶rn: 30-40 frame)
- Mermi izi kalÄ±nlÄ±ÄŸÄ± ve opaklÄ±ÄŸÄ± ayarlanabilir

#### 3.1 [`effects.js`](public/js/effects.js) DeÄŸiÅŸiklikleri
```javascript
createBulletTrail(start, end, color) {
    // ... mevcut kod ...
    
    this.trails.push({
        mesh: trail,
        life: 40,      // 10 â†’ 40
        maxLife: 40    // 10 â†’ 40
    });
}
```

---

## 4. ğŸ‘¤ Roblox TarzÄ± Karakter Modeli

### Mevcut Durum
- Basit silindir (cylinder) geometrisi kullanÄ±lÄ±yor
- [`player.js`](public/js/player.js) satÄ±r 48-69 ve [`bot.js`](public/js/bot.js) satÄ±r 63-80

### Hedef
Roblox tarzÄ± blok karakter:
- Kafa (kÃ¼p)
- GÃ¶vde (dikdÃ¶rtgen prizma)
- Kollar (2 adet, yanda)
- Bacaklar (2 adet, altta)

### Teknik Uygulama

#### 4.1 Yeni Karakter Model Fonksiyonu
```javascript
function createRobloxStyleCharacter(color) {
    const group = new THREE.Group();
    
    // Kafa (Ã¼stte)
    const head = new THREE.Mesh(
        new THREE.BoxGeometry(0.5, 0.5, 0.5),
        new THREE.MeshStandardMaterial({ color: 0xffcc99 }) // Ten rengi
    );
    head.position.y = 1.4;
    group.add(head);
    
    // GÃ¶vde
    const torso = new THREE.Mesh(
        new THREE.BoxGeometry(0.6, 0.8, 0.4),
        new THREE.MeshStandardMaterial({ color: color })
    );
    torso.position.y = 0.8;
    group.add(torso);
    
    // Sol kol
    const leftArm = new THREE.Mesh(
        new THREE.BoxGeometry(0.2, 0.7, 0.2),
        new THREE.MeshStandardMaterial({ color: color })
    );
    leftArm.position.set(-0.5, 0.85, 0);
    group.add(leftArm);
    
    // SaÄŸ kol
    const rightArm = new THREE.Mesh(
        new THREE.BoxGeometry(0.2, 0.7, 0.2),
        new THREE.MeshStandardMaterial({ color: color })
    );
    rightArm.position.set(0.5, 0.85, 0);
    group.add(rightArm);
    
    // Sol bacak
    const leftLeg = new THREE.Mesh(
        new THREE.BoxGeometry(0.25, 0.6, 0.25),
        new THREE.MeshStandardMaterial({ color: 0x333333 }) // Pantolon
    );
    leftLeg.position.set(-0.15, 0.3, 0);
    group.add(leftLeg);
    
    // SaÄŸ bacak
    const rightLeg = new THREE.Mesh(
        new THREE.BoxGeometry(0.25, 0.6, 0.25),
        new THREE.MeshStandardMaterial({ color: 0x333333 })
    );
    rightLeg.position.set(0.15, 0.3, 0);
    group.add(rightLeg);
    
    return group;
}
```

#### 4.2 Dosya DeÄŸiÅŸiklikleri
- [`player.js`](public/js/player.js): `createMesh()` metodu gÃ¼ncellenecek
- [`bot.js`](public/js/bot.js): `createMesh()` metodu gÃ¼ncellenecek

---

## 5. ğŸ¨ Ana Sayfa TasarÄ±mÄ±

### Mevcut Durum
- Basit gradient arka plan
- Grid Ã§izgileri animasyonu
- Standart butonlar

### Hedef
- Daha modern ve etkileyici tasarÄ±m
- ParÃ§acÄ±k efektleri
- Daha iyi tipografi
- Hover animasyonlarÄ±

### DeÄŸiÅŸiklikler

#### 5.1 [`style.css`](public/css/style.css)
- Yeni gradient arka plan
- ParÃ§acÄ±k animasyonlarÄ± (CSS)
- Glow efektleri
- Daha modern buton stilleri
- Logo animasyonu

#### 5.2 [`index.html`](public/index.html)
- Yeni dekoratif elementler
- Daha iyi yapÄ±landÄ±rÄ±lmÄ±ÅŸ iÃ§erik

---

## 6. ğŸ’¥ Bot ParÃ§alanma Efekti

### Mevcut Durum
Bot Ã¶ldÃ¼ÄŸÃ¼nde sadece `mesh.visible = false` yapÄ±lÄ±yor.

### Hedef
- Bot parÃ§alara ayrÄ±lacak
- ParÃ§alar farklÄ± yÃ¶nlerde uÃ§acak
- YavaÅŸÃ§a kaybolacak

### Teknik Uygulama

#### 6.1 [`effects.js`](public/js/effects.js) - Yeni Metod
```javascript
createDeathExplosion(position, color) {
    const pieceCount = 12;
    const pieces = [];
    
    for (let i = 0; i < pieceCount; i++) {
        const size = 0.1 + Math.random() * 0.2;
        const piece = new THREE.Mesh(
            new THREE.BoxGeometry(size, size, size),
            new THREE.MeshStandardMaterial({
                color: color,
                transparent: true,
                opacity: 1
            })
        );
        
        piece.position.copy(position);
        piece.position.y += Math.random() * 1.5;
        
        const velocity = new THREE.Vector3(
            (Math.random() - 0.5) * 0.3,
            Math.random() * 0.3,
            (Math.random() - 0.5) * 0.3
        );
        
        this.scene.add(piece);
        
        this.particles.push({
            mesh: piece,
            velocity: velocity,
            life: 60 + Math.random() * 30,
            maxLife: 90,
            gravity: true,
            rotationSpeed: new THREE.Vector3(
                Math.random() * 0.2,
                Math.random() * 0.2,
                Math.random() * 0.2
            )
        });
    }
}
```

#### 6.2 [`bot.js`](public/js/bot.js) - die() Metodu
```javascript
die(effects) {
    this.isAlive = false;
    this.deaths++;
    this.mesh.visible = false;
    
    // ParÃ§alanma efekti
    if (effects) {
        effects.createDeathExplosion(this.position, this.color);
    }
}
```

---

## 7. ğŸ”Š Silah AtÄ±ÅŸ Sesleri

### Mevcut Durum
- ProsedÃ¼rel ses Ã¼retimi (Web Audio API oscillator)
- GerÃ§ek ses dosyalarÄ± kullanÄ±lmÄ±yor

### Hedef
- `gun_voices/` klasÃ¶rÃ¼ndeki ses dosyalarÄ± kullanÄ±lacak:
  - `single.mp3` â†’ Pistol, Sniper
  - `double_tap.mp3` â†’ Shotgun
  - `burst.mp3` â†’ Rifle
  - `spray.mp3` â†’ Alternatif

### Teknik Uygulama

#### 7.1 [`audio.js`](public/js/audio.js) DeÄŸiÅŸiklikleri
```javascript
// Ses dosyalarÄ±nÄ± yÃ¼kle
async loadSounds() {
    const soundFiles = {
        single: 'gun_voices/single.mp3',
        double_tap: 'gun_voices/double_tap.mp3',
        burst: 'gun_voices/burst.mp3',
        spray: 'gun_voices/spray.mp3'
    };
    
    for (const [name, path] of Object.entries(soundFiles)) {
        const response = await fetch(path);
        const arrayBuffer = await response.arrayBuffer();
        this.soundBuffers[name] = await this.context.decodeAudioData(arrayBuffer);
    }
}

// Silah sesi Ã§al
playGunSound(weaponId) {
    const soundMap = {
        pistol: 'single',
        sniper: 'single',
        shotgun: 'double_tap',
        rifle: 'burst'
    };
    
    const soundName = soundMap[weaponId];
    this.playBuffer(soundName);
}

playBuffer(name) {
    if (!this.soundBuffers[name]) return;
    
    const source = this.context.createBufferSource();
    source.buffer = this.soundBuffers[name];
    source.connect(this.sfxGain);
    source.start();
}
```

---

## ğŸ“Š Uygulama SÄ±rasÄ±

```mermaid
flowchart TD
    A[BaÅŸlangÄ±Ã§] --> B[1. Crosshair + Mouse Takip]
    B --> C[2. WASD DÃ¼zeltme]
    C --> D[3. Mermi Ä°zi Uzatma]
    D --> E[4. Roblox Karakter]
    E --> F[5. Ana Sayfa TasarÄ±mÄ±]
    F --> G[6. Bot ParÃ§alanma]
    G --> H[7. Silah Sesleri]
    H --> I[Test ve DoÄŸrulama]
    I --> J[TamamlandÄ±]
```

---

## âš ï¸ Dikkat Edilmesi Gerekenler

1. **Pointer Lock KaldÄ±rma**: Fare serbest bÄ±rakÄ±lacak, bu UI etkileÅŸimlerini deÄŸiÅŸtirecek
2. **Performans**: ParÃ§alanma efektleri ve parÃ§acÄ±k sayÄ±sÄ± kontrol edilmeli
3. **Ses YÃ¼kleme**: Ses dosyalarÄ± async yÃ¼klenecek, oyun baÅŸlamadan Ã¶nce tamamlanmalÄ±
4. **Karakter BoyutlarÄ±**: Yeni modelin Ã§arpÄ±ÅŸma kutularÄ± gÃ¼ncellenmeli

---

## ğŸ§ª Test SenaryolarÄ±

| GÃ¶rev | Test |
|-------|------|
| Mouse takip | Fare hareket ettirildiÄŸinde karakter dÃ¼zgÃ¼n dÃ¶nÃ¼yor mu? |
| WASD | TÃ¼m yÃ¶n tuÅŸlarÄ± doÄŸru Ã§alÄ±ÅŸÄ±yor mu? |
| Mermi izi | Mermi izi yeterince uzun gÃ¶rÃ¼nÃ¼yor mu? |
| Karakter | Roblox tarzÄ± model doÄŸru render ediliyor mu? |
| Ana sayfa | TasarÄ±m modern ve Ã§ekici mi? |
| ParÃ§alanma | Bot Ã¶ldÃ¼ÄŸÃ¼nde parÃ§alar doÄŸru uÃ§uyor mu? |
| Sesler | Her silah iÃ§in doÄŸru ses Ã§alÄ±yor mu? |

---

*Bu plan onaylandÄ±ktan sonra Code modunda uygulanacaktÄ±r.*
